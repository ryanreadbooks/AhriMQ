cmake_minimum_required(VERSION 3.5)

ahrimq_create_dependency(
  NAME
    net
  SRCS
    "addr.cc"
    "epoller.cc"
    "eventloop.cc"
    "reactor.cc"
    "reactor_conn.cc"
    "utils.cc"
    "tcp/tcp_conn.cc"
    "tcp/tcp_server.cc"
    "http/http_conn.cc"
    "http/http_server.cc"
    "http/http_header.cc"
    "http/http_method.cc"
    "http/http_parser.cc"
    "http/http_request.cc"
    "http/http_response.cc"
    "http/http_version.cc"
    "http/http_router.cc"
    "http/url.cc"
  INCS
    "addr.h"
    "epoller.h"
    "eventloop.h"
    "reactor.h"
    "reactor_conn.h"
    "utils.h"
    "tcp/tcp_conn.h"
    "tcp/tcp_server.h"
    "http/http_conn.h"
    "http/http_server.h"
    "http/http_header.h"
    "http/http_method.h"
    "http/http_parser.h"
    "http/http_request.h"
    "http/http_response.h"
    "http/http_version.h"
    "http/http_router.h"
    "http/url.h"
  LINKS
    pthread
    ahrimq::base
    ahrimq::buffer
)

ahrimq_add_cc_test(
  NAME
    http_router_test
  SRCS
    "http/http_router_test.cc"
  LINKS
    ahrimq::net
    ahrimq::buffer
)
